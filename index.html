<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Uttarakhand Tourism - Explore Divine Beauty</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #047857;
            --primary-light: #10b981;
            --secondary: #0891b2;
            --accent: #f97316;
            --bg: #f8fafc;
            --surface: #ffffff;
            --text: #0f172a;
            --text-light: #64748b;
            --safe-top: env(safe-area-inset-top, 20px);
            --safe-bottom: env(safe-area-inset-bottom, 20px);
        }

        * {
            -webkit-tap-highlight-color: transparent;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
        }

        html {
            scroll-behavior: smooth;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #ecfdf5 100%), 
                        url('data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22400%22 height=%22400%22%3E%3Cdefs%3E%3ClinearGradient id=%22grad1%22 x1=%220%25%22 y1=%220%25%22 x2=%22100%25%22 y2=%22100%25%22%3E%3Cstop offset=%220%25%22 style=%22stop-color:rgba(4,120,87,0.03);stop-opacity:1%22 /%3E%3Cstop offset=%22100%25%22 style=%22stop-color:rgba(16,185,129,0.03);stop-opacity:1%22 /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width=%22400%22 height=%22400%22 fill=%22url(%23grad1)%22/%3E%3Ccircle cx=%2250%25%22 cy=%2250%25%22 r=%22200%22 fill=%22none%22 stroke=%22rgba(4,120,87,0.05)%22 stroke-width=%221%22/%3E%3Ccircle cx=%2250%25%22 cy=%2250%25%22 r=%22150%22 fill=%22none%22 stroke=%22rgba(16,185,129,0.05)%22 stroke-width=%221%22/%3E%3Ccircle cx=%2250%25%22 cy=%2250%25%22 r=%22100%22 fill=%22none%22 stroke=%22rgba(4,120,87,0.08)%22 stroke-width=%221%22/%3E%3C/svg%3E') repeat,
                        linear-gradient(135deg, #f8fafc 0%, #ecfdf5 100%);
            background-size: auto, 400px 400px, 100% 100%;
            background-attachment: fixed, fixed, fixed;
            color: var(--text);
            padding-top: calc(70px + var(--safe-top));
            padding-bottom: calc(90px + var(--safe-bottom));
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* BACKGROUND PATTERN ANIMATION */
        @keyframes backgroundShift {
            0% { background-position: 0 0, 0 0, 0 0; }
            100% { background-position: 400px 400px, 400px 400px, 0 0; }
        }

        body.animated-bg {
            animation: backgroundShift 20s linear infinite;
        }

        /* CUSTOM BACKGROUND OVERLAY */
        body::before {
            content: '';
            position: fixed;
            inset: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(16, 185, 129, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(4, 120, 87, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-light);
            border-radius: 4px;
        }

        /* ANIMATIONS */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(100%); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* HEADER */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 50;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(4, 120, 87, 0.1);
            padding: 0.75rem 1.25rem;
            padding-top: max(0.75rem, var(--safe-top));
            box-shadow: 0 4px 12px rgba(4, 120, 87, 0.05);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1400px;
            margin: 0 auto;
            gap: 1rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 900;
            font-size: 1.125rem;
            color: var(--text);
            font-family: 'Poppins', sans-serif;
            letter-spacing: -0.5px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 900;
            box-shadow: 0 8px 16px rgba(4, 120, 87, 0.2);
            animation: float 3s ease-in-out infinite;
        }

        .search-bar {
            flex: 1;
            max-width: 400px;
            height: 40px;
            background: white;
            border: 1px solid rgba(4, 120, 87, 0.2);
            border-radius: 20px;
            padding: 0 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-bar:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(4, 120, 87, 0.1);
        }

        .search-bar input {
            flex: 1;
            border: none;
            background: transparent;
            outline: none;
            font-size: 0.875rem;
            color: var(--text);
        }

        .search-bar input::placeholder {
            color: var(--text-light);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .icon-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            border: 1px solid rgba(4, 120, 87, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text);
            position: relative;
        }

        .icon-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(4, 120, 87, 0.2);
        }

        .icon-btn:active {
            transform: scale(0.95);
        }

        .notification-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 8px;
            height: 8px;
            background: #ef4444;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        /* BUTTONS - IMPROVED */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.875rem 1.75rem;
            border-radius: 12px;
            font-weight: 700;
            font-size: 0.875rem;
            border: none;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-family: 'Poppins', sans-serif;
            letter-spacing: 0.3px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 24px rgba(4, 120, 87, 0.3);
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
        }

        .btn-primary:hover {
            box-shadow: 0 12px 32px rgba(4, 120, 87, 0.4);
        }

        .btn-secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        .btn-outline {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }

        .btn-small {
            padding: 0.6rem 1.2rem;
            font-size: 0.8rem;
        }

        /* SPLASH SCREEN */
        .splash-screen {
            position: fixed;
            inset: 0;
            z-index: 100;
            background: linear-gradient(135deg, #ecfdf5 0%, #ffffff 100%),
                        url('data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22100%22 height=%22100%22%3E%3Ccircle cx=%2250%22 cy=%2250%22 r=%2240%22 fill=%22none%22 stroke=%22rgba(4,120,87,0.1)%22 stroke-width=%221%22/%3E%3Ccircle cx=%2250%22 cy=%2250%22 r=%2230%22 fill=%22none%22 stroke=%22rgba(16,185,129,0.1)%22 stroke-width=%221%22/%3E%3C/svg%3E') repeat;
            background-size: 100% 100%, 100px 100px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            animation: fadeInUp 0.9s ease-out;
        }

        .splash-screen.hidden {
            opacity: 0;
            visibility: hidden;
            transition: all 5s ease-out;
            pointer-events: none;
        }

        .splash-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 20px 40px rgba(4, 120, 87, 0.3);
            animation: scaleIn 0.6s ease-out;
        }

        .splash-title {
            font-size: 2.5rem;
            font-weight: 900;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
            letter-spacing: -1px;
        }

        .splash-subtitle {
            font-size: 1.125rem;
            color: var(--primary);
            font-weight: 600;
            margin-top: 0.5rem;
            letter-spacing: 1px;
        }

        /* MAIN CONTENT */
        main {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem 1.25rem;
            display: flex;
            flex-direction: column;
            gap: 3rem;
            position: relative;
            z-index: 10;
        }

        /* HERO SECTION */
        .hero-video {
            position: relative;
            width: 100%;
            aspect-ratio: 16 / 9;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 30px 60px rgba(4, 120, 87, 0.15);
            animation: fadeInUp 0.7s ease-out 0.1s backwards;
        }

        .hero-video video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .hero-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(4, 120, 87, 0.2) 0%, rgba(4, 120, 87, 0.05) 100%);
        }

        /* SECTION */
        .section {
            animation: fadeInUp 0.7s ease-out backwards;
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(10px);
            padding: 2rem;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.7);
            box-shadow: 0 8px 32px rgba(4, 120, 87, 0.08);
        }

        .section-title {
            font-size: 2rem;
            font-weight: 900;
            font-family: 'Poppins', sans-serif;
            color: var(--text);
            margin-bottom: 1.5rem;
            letter-spacing: -0.5px;
        }

        .section-subtitle {
            font-size: 0.875rem;
            color: var(--text-light);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }

        /* AUTO SLIDER */
        .auto-slider-container {
            position: relative;
            width: 100%;
            height: 60vh;
            border-radius: 24px;
            overflow: hidden;
            background: linear-gradient(135deg, var(--surface) 0%, rgba(255, 255, 255, 0.9) 100%);
            box-shadow: 0 12px 32px rgba(4, 120, 87, 0.12);
            border: 1px solid rgba(255, 255, 255, 0.6);
        }

        .auto-slider-track {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            transition: transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .auto-slider-slide {
            position: relative;
            flex: 0 0 100%;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: flex-end;
        }

        .auto-slider-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .auto-slider-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(180deg, transparent 0%, rgba(0, 0, 0, 0.4) 40%, rgba(0, 0, 0, 0.8) 100%);
            padding: 3rem 2rem 2rem;
            color: white;
            z-index: 10;
        }

        .auto-slider-title {
            font-size: 2rem;
            font-weight: 900;
            font-family: 'Poppins', sans-serif;
            margin-bottom: 0.5rem;
            letter-spacing: -0.5px;
        }

        .auto-slider-desc {
            font-size: 1rem;
            opacity: 0.95;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .auto-slider-dots {
            position: absolute;
            bottom: 1.5rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 0.75rem;
            z-index: 20;
        }

        .auto-slider-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.4);
            cursor: pointer;
            transition: all 0.4s ease;
            border: 2px solid transparent;
        }

        .auto-slider-dot.active {
            background: white;
            width: 32px;
            border-radius: 6px;
            box-shadow: 0 0 16px rgba(255, 255, 255, 0.6);
        }

        .auto-slider-dot:hover {
            background: rgba(255, 255, 255, 0.7);
        }

        /* CATEGORY GRID */
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .category-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.75rem;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(4, 120, 87, 0.1);
            backdrop-filter: blur(10px);
        }

        .category-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(4, 120, 87, 0.15);
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.9);
        }

        .category-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            background: rgba(4, 120, 87, 0.1);
            transition: all 0.3s ease;
        }

        .category-card.active .category-icon {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            transform: scale(1.1);
            box-shadow: 0 8px 16px rgba(4, 120, 87, 0.2);
        }

        .category-label {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text);
            text-align: center;
        }

        /* EXPLORE SCREEN */
        .explore-screen {
            position: fixed;
            inset: 0;
            z-index: 60;
            background: linear-gradient(135deg, #f8fafc 0%, #ecfdf5 100%),
                        url('data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22400%22 height=%22400%22%3E%3Cdefs%3E%3ClinearGradient id=%22grad1%22 x1=%220%25%22 y1=%220%25%22 x2=%22100%25%22 y2=%22100%25%22%3E%3Cstop offset=%220%25%22 style=%22stop-color:rgba(4,120,87,0.03);stop-opacity:1%22 /%3E%3Cstop offset=%22100%25%22 style=%22stop-color:rgba(16,185,129,0.03);stop-opacity:1%22 /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width=%22400%22 height=%22400%22 fill=%22url(%23grad1)%22/%3E%3Ccircle cx=%2250%25%22 cy=%2250%25%22 r=%22200%22 fill=%22none%22 stroke=%22rgba(4,120,87,0.05)%22 stroke-width=%221%22/%3E%3C/svg%3E') repeat;
            background-size: 100% 100%, 400px 400px;
            background-attachment: fixed, fixed;
            display: none;
            flex-direction: column;
            animation: slideInRight 0.4s ease-out;
            overflow: hidden;
        }

        .explore-screen.active {
            display: flex;
        }

        .explore-header {
            position: sticky;
            top: 0;
            z-index: 40;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(4, 120, 87, 0.1);
            padding: 1rem 1.25rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-shrink: 0;
            box-shadow: 0 4px 12px rgba(4, 120, 87, 0.05);
        }

        .explore-back-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(4, 120, 87, 0.1);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--primary);
            flex-shrink: 0;
        }

        .explore-back-btn:hover {
            background: rgba(4, 120, 87, 0.2);
            transform: translateX(-2px);
        }

        .explore-title {
            font-size: 1.5rem;
            font-weight: 900;
            font-family: 'Poppins', sans-serif;
            color: var(--text);
            text-transform: capitalize;
        }

        /* EXPLORE TABS */
        .explore-tabs-container {
            position: sticky;
            top: 60px;
            z-index: 39;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(4, 120, 87, 0.1);
            flex-shrink: 0;
        }

        .explore-tabs {
            display: flex;
            gap: 0.5rem;
            padding: 1rem 1.25rem;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scroll-behavior: smooth;
        }

        .explore-tabs::-webkit-scrollbar {
            height: 4px;
        }

        .explore-tabs::-webkit-scrollbar-thumb {
            background: var(--primary-light);
            border-radius: 2px;
        }

        .explore-tab {
            flex: 0 0 auto;
            padding: 0.75rem 1.25rem;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.7);
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 0.875rem;
            color: var(--text-light);
            white-space: nowrap;
            font-family: 'Poppins', sans-serif;
            backdrop-filter: blur(10px);
        }

        .explore-tab.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(4, 120, 87, 0.2);
        }

        .explore-tab:hover:not(.active) {
            background: rgba(4, 120, 87, 0.1);
            transform: translateY(-1px);
        }

        /* EXPLORE CONTENT */
        .explore-body {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding: 1.5rem 1.25rem;
        }

        .explore-content {
            display: none;
        }

        .explore-content.active {
            display: block;
        }

        .explore-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .explore-card {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.6);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: pointer;
            display: flex;
            flex-direction: column;
            height: 100%;
            backdrop-filter: blur(10px);
        }

        .explore-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 32px rgba(4, 120, 87, 0.15);
            background: rgba(255, 255, 255, 0.95);
        }

        .explore-card-img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background: linear-gradient(135deg, #f0f9ff 0%, #ecfdf5 100%);
        }

        .explore-card-body {
            padding: 1.5rem;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .explore-card-title {
            font-size: 1.125rem;
            font-weight: 800;
            color: var(--text);
            margin-bottom: 0.5rem;
            font-family: 'Poppins', sans-serif;
        }

        .explore-card-subtitle {
            font-size: 0.875rem;
            color: var(--text-light);
            margin-bottom: 1rem;
            line-height: 1.4;
            flex: 1;
        }

        .explore-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .explore-rating {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-weight: 700;
            color: var(--primary);
            font-size: 0.875rem;
        }

        .explore-card .btn {
            width: 100%;
            margin-top: auto;
        }

        /* CARDS */
        .card {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.6);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: pointer;
            backdrop-filter: blur(10px);
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 32px rgba(4, 120, 87, 0.15);
            background: rgba(255, 255, 255, 0.95);
        }

        .card-img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            background: linear-gradient(135deg, #f0f9ff 0%, #ecfdf5 100%);
        }

        .card-body {
            padding: 1.75rem;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 800;
            color: var(--text);
            margin-bottom: 0.5rem;
            font-family: 'Poppins', sans-serif;
        }

        .card-subtitle {
            font-size: 0.875rem;
            color: var(--text-light);
            margin-bottom: 1rem;
        }

        /* BADGE */
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            width: fit-content;
        }

        .badge-primary {
            background: linear-gradient(135deg, rgba(4, 120, 87, 0.15) 0%, rgba(16, 185, 129, 0.1) 100%);
            color: var(--primary);
        }

        .badge-success {
            background: rgba(34, 197, 94, 0.1);
            color: #22c55e;
        }

        .badge-warning {
            background: rgba(249, 115, 22, 0.1);
            color: #f97316;
        }

        /* PREMIUM CARD */
        .premium-card {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            padding: 2rem;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(4, 120, 87, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .premium-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 300px;
            height: 300px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            filter: blur(40px);
        }

        .premium-card-content {
            position: relative;
            z-index: 1;
        }

        /* FOOTER NAV */
        .footer-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 50;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 1px solid rgba(4, 120, 87, 0.1);
            padding-bottom: max(1rem, var(--safe-bottom));
            box-shadow: 0 -4px 12px rgba(4, 120, 87, 0.05);
        }

        .nav-items {
            display: flex;
            justify-content: space-around;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            height: 70px;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            text-decoration: none;
            color: var(--text-light);
            font-size: 0.75rem;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-item svg {
            width: 24px;
            height: 24px;
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-item.active::after {
            content: '';
            position: absolute;
            top: -8px;
            width: 8px;
            height: 8px;
            background: var(--primary);
            border-radius: 50%;
            box-shadow: 0 0 12px rgba(4, 120, 87, 0.5);
        }

        /* MODALS */
        .modal {
            position: fixed;
            inset: 0;
            z-index: 70;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            padding: 1rem;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            padding: 2rem;
            max-width: 500px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
            animation: scaleIn 0.3s ease-out;
            border: 1px solid rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
        }

        /* SCROLL CONTAINER */
        .scroll-container {
            display: flex;
            overflow-x: auto;
            gap: 1rem;
            padding-bottom: 0.5rem;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            scroll-behavior: smooth;
        }

        .scroll-container::-webkit-scrollbar {
            height: 0;
        }

        .scroll-item {
            flex: 0 0 auto;
            scroll-snap-align: start;
            width: calc(100vw - 2.5rem);
            max-width: 300px;
        }

        /* SPLASH VIDEO (full-screen, proper stacking) */
        .splash-video {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            object-fit: cover !important;
            object-position: center !important;
            z-index: 0 !important;
            background: black;
        }

        /* ensure overlay and content stack on top of the video */
        .splash-screen { /* keep existing properties; ensure overflow visible */
            position: fixed;
            inset: 0;
            z-index: 100;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            animation: fadeInUp 0.9s ease-out;
            overflow: hidden;
        }

        .splash-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0,0,0,0.35);
            z-index: 1;
            pointer-events: none;
        }

        .splash-content {
            position: relative;
            z-index: 2;
            color: #ffffff;
            text-align: center;
            pointer-events: none; /* let tap dismiss via container if needed */
        }

        .splash-content .splash-icon {
            width: 80px;
            height: 80px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 18px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            font-size: 2.2rem;
            box-shadow: 0 18px 36px rgba(4,120,87,0.28);
            margin-bottom: 1rem;
        }

        .splash-content .splash-title {
            font-family: 'Poppins', sans-serif;
            font-size: 2.2rem;
            font-weight: 900;
            letter-spacing: -1px;
            margin: 0;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(240,255,245,0.9) 100%);
        }

        .splash-content .splash-subtitle {
            margin-top: 0.4rem;
            color: rgba(255,255,255,0.9);
            font-weight: 600;
            letter-spacing: 0.8px;
        }

        .more-list { display:flex; flex-direction:column; gap:.6rem; margin-top:0.75rem; }
        .more-item { display:flex; align-items:center; justify-content:space-between; gap:.6rem; padding:.75rem 1rem; background:rgba(255,255,255,0.96); border-radius:12px; border:1px solid rgba(4,120,87,0.06); }
        .more-item .meta { display:flex; gap:.6rem; align-items:center; flex:1; }
        .more-item h4 { margin:0; font-size:0.95rem; font-weight:800; font-family:'Poppins',sans-serif; }
        .more-item p { margin:0; color:var(--text-light); font-size:0.85rem; }
        .more-action-btn { min-width:110px; }
        .phrase-list { display:grid; grid-template-columns:repeat(auto-fit,minmax(140px,1fr)); gap:.5rem; margin-top:.6rem; }
        .phrase { background:#f8fafc; padding:.6rem; border-radius:8px; font-size:.95rem; }
        .weather-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(120px,1fr)); gap:.5rem; margin-top:.6rem; }
        .weather-day { background:#fff; padding:.6rem; border-radius:8px; border:1px solid rgba(4,120,87,0.04); text-align:center; }
        .more-empty { color:var(--text-light); font-size:.95rem; padding:.6rem 0; }

        /* ensure modal content scrolls if long */
        .modal-content.more { max-height:70vh; overflow:auto; }

        /* MAP SCREEN */
        .map-screen {
            position: fixed;
            inset: 0;
            z-index: 80;
            display: none;
            flex-direction: column;
            background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(248,250,252,0.98));
        }

        .map-screen.active {
            display: flex;
        }

        .map-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem 1.25rem;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(4,120,87,0.08);
            z-index: 90;
        }

        .map-back-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(4,120,87,0.08);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
            color: var(--primary);
        }

        #mapContainer {
            flex: 1;
            min-height: 0; /* allow flexbox to size properly */
        }

        /* ensure Leaflet map fits */
        #map {
            width: 100%;
            height: 100%;
        }
    </style>

    <!-- Leaflet CSS (map) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">

    <style>
    /* Full-bleed hero & slider (remove boxed look) */
.hero-video,
.auto-slider-container {
  width: calc(100% + 2.5rem);
  margin-left: -1.25rem;
  margin-right: -1.25rem;
  border-radius: 20px;
  box-shadow: 0 18px 40px rgba(4,120,87,0.12);
  background: transparent;
}

/* Let hero video cover fully (avoid inner white card feel) */
.section > .hero-video,
.section > .auto-slider-container {
  padding: 0;
  background: transparent;
  border: none;
}

/* Make explore cards unboxed by default on home explore screen */
.explore-screen.explore-unboxed .explore-card {
  background: transparent;
  border: none;
  box-shadow: none;
}
.explore-screen.explore-unboxed .explore-card-body {
  padding: 0.9rem 0;
  background: transparent;
}
.explore-screen.explore-unboxed .explore-card-img {
  border-radius: 14px;
  height: 160px;
}

/* Premium More modal visuals */
.modal-content.more {
  max-width: 920px;
  width: calc(100% - 1.5rem);
  border-radius: 20px;
  padding: 1.25rem;
  background: linear-gradient(180deg, rgba(255,255,255,0.98), #f7fffb);
  box-shadow: 0 28px 60px rgba(4,120,87,0.18);
  border: 1px solid rgba(16,185,129,0.06);
}
.more-header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin-bottom:0.75rem;
}
.more-hero {
  display:flex;
  gap:12px;
  align-items:center;
}
.more-hero .icon {
  width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--primary),var(--primary-light));color:white;font-size:24px;
}
.more-actions { display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.6rem; }

/* improved search appearance */
.search-bar input { cursor:text; background:transparent; }
.search-active { outline: 2px solid rgba(4,120,87,0.12); box-shadow: 0 8px 24px rgba(4,120,87,0.08); }

/* mobile performance: reduce heavy effects */
@media (max-width: 640px) {
  body::before, .hero-video, .auto-slider-container, .explore-card, .modal-content { backface-visibility: hidden; -webkit-font-smoothing: antialiased; }
  .section, .header, .modal-content { backdrop-filter: none; -webkit-backdrop-filter: none; box-shadow: 0 6px 18px rgba(0,0,0,0.06); }
  .auto-slider-container { height: 48vh; }
  .explore-card-img { height: 140px; }
  .btn { padding: 0.7rem 1rem; font-size: 0.9rem; }
}

/* tiny helper to show 'no-results' message in explore */
.explore-no-results { padding:1rem; color:var(--text-light); text-align:center; }
    </style>

    <!-- Leaflet JS (map) -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- ...existing head content... -->
</head>
<body>

    <!-- SPLASH SCREEN -->
    <div id="splashScreen" class="splash-screen" title="Tap to dismiss">
        <!-- Fullscreen video (autoplay muted playsinline) -->
        <video autoplay muted playsinline class="splash-video" preload="auto" playsinline>
            <source src="Monal_Themed_splashScreen.mp4" type="video/mp4">
            <source src="Monal_Themed_splashScreen.webm" type="video/webm">
        </video>

        <!-- overlay to improve text contrast -->
        <div class="splash-overlay" aria-hidden="true"></div>
    </div>

    <!-- HEADER -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">üèî</div>
                <span>Uttarakhand</span>
            </div>
            <div class="search-bar" onclick="openSearch()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                <input type="text" placeholder="Search destinations..." readonly>
            </div>
            <div class="header-actions">
                <button class="icon-btn" onclick="openNotifications()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    <div class="notification-badge"></div>
                </button>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main>
        <!-- HERO VIDEO -->
        <section class="section">
            <div class="hero-video">
                <video autoplay muted loop playsinline poster="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1200' height='675'%3E%3Crect fill='%23047857' width='1200' height='675'/%3E%3Ctext x='50%' y='50%' font-size='32' fill='white' text-anchor='middle' dy='.3em'%3EUttarakhand Paradise%3C/text%3E%3C/svg%3E">
                    <source src="https://cdn.pixabay.com/video/2024/08/16/226795_large.mp4" type="video/mp4">
                </video>
                <div class="hero-overlay"></div>
            </div>
        </section>

        <!-- AUTO SLIDER - 60VH with 7 Images -->
        <section class="section">
            <div class="auto-slider-container">
                <div class="auto-slider-track" id="autoSliderTrack">
                    <div class="auto-slider-slide">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1200' height='800'%3E%3Crect fill='%236d28d9' width='1200' height='800'/%3E%3Ctext x='50%' y='50%' font-size='32' fill='white' text-anchor='middle' dy='.3em'%3EMussoorie%3C/text%3E%3C/svg%3E" alt="Mussoorie">
                        <div class="auto-slider-content">
                            <h3 class="auto-slider-title">Mussoorie</h3>
                            <p class="auto-slider-desc">Queen of Hills with stunning cable car rides, Mall Road shopping, and breathtaking Himalayan views</p>
                        </div>
                    </div>
                    <div class="auto-slider-slide">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1200' height='800'%3E%3Crect fill='%231c70e3' width='1200' height='800'/%3E%3Ctext x='50%' y='50%' font-size='32' fill='white' text-anchor='middle' dy='.3em'%3ENainital%3C/text%3E%3C/svg%3E" alt="Nainital">
                        <div class="auto-slider-content">
                            <h3 class="auto-slider-title">Nainital</h3>
                            <p class="auto-slider-desc">The Lake City - Experience serene boating, lakeside walks, and the sacred Naina Devi Temple</p>
                        </div>
                    </div>
                    <div class="auto-slider-slide">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1200' height='800'%3E%3Crect fill='%23ef4444' width='1200' height='800'/%3E%3Ctext x='50%' y='50%' font-size='32' fill='white' text-anchor='middle' dy='.3em'%3EKedarnath%3C/text%3E%3C/svg%3E" alt="Kedarnath">
                        <div class="auto-slider-content">
                            <h3 class="auto-slider-title">Kedarnath</h3>
                            <p class="auto-slider-desc">Sacred pilgrimage site - One of the Char Dham destinations with ancient temples</p>
                        </div>
                    </div>
                    <div class="auto-slider-slide">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1200' height='800'%3E%3Crect fill='%238b5cf6' width='1200' height='800'/%3E%3Ctext x='50%' y='50%' font-size='32' fill='white' text-anchor='middle' dy='.3em'%3ERishikesh%3C/text%3E%3C/svg%3E" alt="Rishikesh">
                        <div class="auto-slider-content">
                            <h3 class="auto-slider-title">Rishikesh</h3>
                            <p class="auto-slider-desc">Yoga Capital of the World - Meditation on the holy Ganga riverbanks</p>
                        </div>
                    </div>
                    <div class="auto-slider-slide">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1200' height='800'%3E%3Crect fill='%23fcd34d' width='1200' height='800'/%3E%3Ctext x='50%' y='50%' font-size='32' fill='black' text-anchor='middle' dy='.3em'%3EAuli%3C/text%3E%3C/svg%3E" alt="Auli">
                        <div class="auto-slider-content">
                            <h3 class="auto-slider-title">Auli</h3>
                            <p class="auto-slider-desc">Premier skiing destination - World-class slopes and Himalayan adventures</p>
                        </div>
                    </div>
                    <div class="auto-slider-slide">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1200' height='800'%3E%3Crect fill='%2334d399' width='1200' height='800'/%3E%3Ctext x='50%' y='50%' font-size='32' fill='white' text-anchor='middle' dy='.3em'%3EValley of Flowers%3C/text%3E%3C/svg%3E" alt="Valley of Flowers">
                        <div class="auto-slider-content">
                            <h3 class="auto-slider-title">Valley of Flowers</h3>
                            <p class="auto-slider-desc">UNESCO World Heritage site - Alpine meadows with endemic wildflowers</p>
                        </div>
                    </div>
                    <div class="auto-slider-slide">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1200' height='800'%3E%3Crect fill='%237f1d1d' width='1200' height='800'/%3E%3Ctext x='50%' y='50%' font-size='32' fill='white' text-anchor='middle' dy='.3em'%3ERoopkund%3C/text%3E%3C/svg%3E" alt="Roopkund">
                        <div class="auto-slider-content">
                            <h3 class="auto-slider-title">Roopkund</h3>
                            <p class="auto-slider-desc">Mystery Lake Trek - Legendary high altitude lake with mystical legends</p>
                        </div>
                    </div>
                </div>
                <div class="auto-slider-dots" id="autoSliderDots"></div>
            </div>
        </section>

        <!-- EXPLORE SECTION -->
        <section class="section">
            <h2 class="section-title">Explore the Beauty</h2>
            <div class="category-grid">
                <div class="category-card active" onclick="openExplore('popular'); return false;">
                    <div class="category-icon">‚≠ê</div>
                    <span class="category-label">Popular</span>
                </div>
                <div class="category-card" onclick="openExplore('nature'); return false;">
                    <div class="category-icon">üèû</div>
                    <span class="category-label">Nature</span>
                </div>
                <div class="category-card" onclick="openExplore('spiritual'); return false;">
                    <div class="category-icon">üõï</div>
                    <span class="category-label">Spiritual</span>
                </div>
                <div class="category-card" onclick="openExplore('treks'); return false;">
                    <div class="category-icon">ü•æ</div>
                    <span class="category-label">Treks</span>
                </div>
                <div class="category-card" onclick="openExplore('stays'); return false;">
                    <div class="category-icon">üè®</div>
                    <span class="category-label">Stays</span>
                </div>
                <div class="category-card" onclick="openExplore('culture'); return false;">
                    <div class="category-icon">üéâ</div>
                    <span class="category-label">Culture</span>
                </div>
                <div class="category-card" onclick="openExplore('food'); return false;">
                    <div class="category-icon">üç±</div>
                    <span class="category-label">Food</span>
                </div>
            </div>
        </section>

        <!-- PREMIUM FEATURE -->
        <section class="section">
            <div class="premium-card">
                <div class="premium-card-content">
                    <div style="font-size: 2rem; margin-bottom: 1rem;">ü§ñ</div>
                    <h3 style="font-size: 1.5rem; font-weight: 900; margin-bottom: 0.5rem; font-family: 'Poppins', sans-serif;">AI Species Detector</h3>
                    <p style="opacity: 0.9; margin-bottom: 1.5rem;">Identify flora & fauna with advanced AI recognition. Point your camera at any plant or animal.</p>
                    <button class="btn btn-secondary" onclick="openCamera()">Open Camera</button>
                </div>
            </div>
        </section>

        <div style="height: 2rem;"></div>
    </main>

    <!-- EXPLORE SCREEN -->
    <div id="exploreScreen" class="explore-screen">
        <div class="explore-header">
            <button class="explore-back-btn" onclick="closeExplore(); return false;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="19" y1="12" x2="5" y2="12"></line>
                    <polyline points="12 19 5 12 12 5"></polyline>
                </svg>
            </button>
            <h1 class="explore-title" id="exploreTitle">Popular</h1>
        </div>

        <div class="explore-tabs-container">
            <div class="explore-tabs" id="exploreTabs">
                <button class="explore-tab active" data-tab="popular" onclick="switchExploreTab('popular'); return false;">‚≠ê Popular</button>
                <button class="explore-tab" data-tab="nature" onclick="switchExploreTab('nature'); return false;">üèû Nature</button>
                <button class="explore-tab" data-tab="spiritual" onclick="switchExploreTab('spiritual'); return false;">üõï Spiritual</button>
                <button class="explore-tab" data-tab="treks" onclick="switchExploreTab('treks'); return false;">ü•æ Treks</button>
                <button class="explore-tab" data-tab="stays" onclick="switchExploreTab('stays'); return false;">üè® Stays</button>
                <button class="explore-tab" data-tab="culture" onclick="switchExploreTab('culture'); return false;">üéâ Culture</button>
                <button class="explore-tab" data-tab="food" onclick="switchExploreTab('food'); return false;">üç± Food</button>
            </div>
        </div>

        <div class="explore-body">
            <div class="explore-content active" id="popular-content">
                <div class="explore-grid" id="popular-grid"></div>
            </div>
            <div class="explore-content" id="nature-content">
                <div class="explore-grid" id="nature-grid"></div>
            </div>
            <div class="explore-content" id="spiritual-content">
                <div class="explore-grid" id="spiritual-grid"></div>
            </div>
            <div class="explore-content" id="treks-content">
                <div class="explore-grid" id="treks-grid"></div>
            </div>
            <div class="explore-content" id="stays-content">
                <div class="explore-grid" id="stays-grid"></div>
            </div>
            <div class="explore-content" id="culture-content">
                <div class="explore-grid" id="culture-grid"></div>
            </div>
            <div class="explore-content" id="food-content">
                <div class="explore-grid" id="food-grid"></div>
            </div>
        </div>
    </div>

    <!-- MORE / HELP MODAL -->
    <div id="moreModal" class="modal" onclick="if(event.target===this) closeMore()" aria-hidden="true">
      <div class="modal-content more" role="dialog" aria-label="More options">
        <h3 style="font-family:'Poppins',sans-serif;font-weight:900;margin-bottom:.25rem;">More & Help</h3>
        <p style="margin:0 0 .75rem;color:var(--text-light);">Useful local tools and resources for your trip.</p>

        <div id="moreContent">
          <div class="more-list">
            <div class="more-item">
              <div class="meta"><div style="font-size:20px">‚òÅÔ∏è</div><div><h4>Weather Forecast</h4><p>7-day location-based forecast</p></div></div>
              <div><button class="btn btn-primary more-action-btn" onclick="weatherForecast()">Get Forecast</button></div>
            </div>

            <div class="more-item">
              <div class="meta"><div style="font-size:20px">üìç</div><div><h4>Nearby Essentials</h4><p>ATMs / Hospitals / Petrol pumps</p></div></div>
              <div style="display:flex;flex-direction:column;gap:.35rem;">
                <button class="btn btn-outline more-action-btn" onclick="showNearbyEssentials('atm')">ATMs</button>
                <button class="btn btn-outline more-action-btn" onclick="showNearbyEssentials('hospital')">Hospitals</button>
                <button class="btn btn-outline more-action-btn" onclick="showNearbyEssentials('fuel')">Petrol</button>
              </div>
            </div>

            <div class="more-item">
              <div class="meta"><div style="font-size:20px">üöå</div><div><h4>Transport Timings</h4><p>Bus, ropeway & taxi stand times</p></div></div>
              <div><button class="btn btn-primary more-action-btn" onclick="showTransportTimings()">View</button></div>
            </div>

            <div class="more-item">
              <div class="meta"><div style="font-size:20px">üó£Ô∏è</div><div><h4>Local Language Help</h4><p>Garhwali / Kumaoni phrases</p></div></div>
              <div><button class="btn btn-primary more-action-btn" onclick="openLanguageHelp()">Open</button></div>
            </div>

            <div class="more-item">
              <div class="meta"><div style="font-size:20px">üö®</div><div><h4>Emergency SOS</h4><p>Quick action for emergencies</p></div></div>
              <div><button class="btn btn-secondary more-action-btn" onclick="triggerSOS()">SOS</button></div>
            </div>

            <div class="more-item">
              <div class="meta"><div style="font-size:20px">üì•</div><div><h4>Downloadable Guides</h4><p>PDF maps & trek guides</p></div></div>
              <div><button class="btn btn-outline more-action-btn" onclick="openGuides()">Open</button></div>
            </div>
          </div>
        </div>

        <div style="display:flex;gap:.5rem;justify-content:flex-end;margin-top:1rem;">
          <button class="btn btn-secondary" onclick="closeMore()">Close</button>
        </div>
      </div>
    </div>

    <!-- FOOTER NAV -->
    <footer class="footer-nav">
        <div class="nav-items">
            <a href="#" class="nav-item active" onclick="setNav('home'); return false;">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg>
                <span>Home</span>
            </a>
            <a href="#" class="nav-item" onclick="openExplore('popular'); setNav('explore'); return false;">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                <span>Explore</span>
            </a>
            <a href="#" class="nav-item" onclick="openMap(); setNav('map'); return false;">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0z"></path></svg>
                <span>Map</span>
            </a>
            <a href="#" class="nav-item" onclick="openMore(); return false;">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>
                <span>More</span>
            </a>
        </div>
    </footer>

    <!-- MODALS (detail + more) -->
    <div id="detailModal" class="modal" onclick="if(event.target === this) closeModal()">
        <div class="modal-content">
            <h2 id="detailTitle" style="font-size: 1.5rem; font-weight: 900; margin-bottom: 1rem; color: var(--text); font-family: 'Poppins', sans-serif;"></h2>
            <p id="detailDescription" style="color: var(--text-light); line-height: 1.6; margin-bottom: 1.5rem;"></p>
            <button class="btn btn-primary" onclick="closeModal()">Close</button>
        </div>
    </div>

    <div id="moreModal" class="modal" onclick="if(event.target===this) closeMore()" aria-hidden="true">
      <div class="modal-content more" role="dialog" aria-label="More options">
        <h3 style="font-family:'Poppins',sans-serif;font-weight:900;margin-bottom:.25rem;">More & Help</h3>
        <p style="margin:0 0 .75rem;color:var(--text-light);">Useful local tools and resources for your trip.</p>

        <div id="moreContent">
          <div class="more-list">
            <div class="more-item">
              <div class="meta"><div style="font-size:20px">‚òÅÔ∏è</div><div><h4>Weather Forecast</h4><p>7-day location-based forecast</p></div></div>
              <div><button class="btn btn-primary more-action-btn" onclick="weatherForecast()">Get Forecast</button></div>
            </div>

            <div class="more-item">
              <div class="meta"><div style="font-size:20px">üìç</div><div><h4>Nearby Essentials</h4><p>ATMs / Hospitals / Petrol pumps</p></div></div>
              <div style="display:flex;flex-direction:column;gap:.35rem;">
                <button class="btn btn-outline more-action-btn" onclick="showNearbyEssentials('atm')">ATMs</button>
                <button class="btn btn-outline more-action-btn" onclick="showNearbyEssentials('hospital')">Hospitals</button>
                <button class="btn btn-outline more-action-btn" onclick="showNearbyEssentials('fuel')">Petrol</button>
              </div>
            </div>

            <div class="more-item">
              <div class="meta"><div style="font-size:20px">üöå</div><div><h4>Transport Timings</h4><p>Bus, ropeway & taxi stand times</p></div></div>
              <div><button class="btn btn-primary more-action-btn" onclick="showTransportTimings()">View</button></div>
            </div>

            <div class="more-item">
              <div class="meta"><div style="font-size:20px">üó£Ô∏è</div><div><h4>Local Language Help</h4><p>Garhwali / Kumaoni phrases</p></div></div>
              <div><button class="btn btn-primary more-action-btn" onclick="openLanguageHelp()">Open</button></div>
            </div>

            <div class="more-item">
              <div class="meta"><div style="font-size:20px">üö®</div><div><h4>Emergency SOS</h4><p>Quick action for emergencies</p></div></div>
              <div><button class="btn btn-secondary more-action-btn" onclick="triggerSOS()">SOS</button></div>
            </div>

            <div class="more-item">
              <div class="meta"><div style="font-size:20px">üì•</div><div><h4>Downloadable Guides</h4><p>PDF maps & trek guides</p></div></div>
              <div><button class="btn btn-outline more-action-btn" onclick="openGuides()">Open</button></div>
            </div>
          </div>
        </div>

        <div style="display:flex;gap:.5rem;justify-content:flex-end;margin-top:1rem;">
          <button class="btn btn-secondary" onclick="closeMore()">Close</button>
        </div>
      </div>
    </div>

    <!-- BASIC SCRIPTS -->
    <script>
      // keep existing handlers (no changes) - ensure these functions exist in your script area:
      // openExplore, setNav, openMap, openMore, weatherForecast, showNearbyEssentials,
      // showTransportTimings, openLanguageHelp, triggerSOS, openGuides, closeMore, closeModal
      // If your file already defines them, nothing else required here.
      // Small safety: expose a no-op if missing to avoid console errors.
      window.openExplore = window.openExplore || function(){ console.log('openExplore placeholder'); };
      window.setNav = window.setNav || function(){ document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active')); };
      window.openMap = window.openMap || function(){ console.log('openMap placeholder'); };
      window.openMore = window.openMore || function(){ document.getElementById('moreModal')?.classList.add('active'); };
      window.closeMore = window.closeMore || function(){ document.getElementById('moreModal')?.classList.remove('active'); };
      window.closeModal = window.closeModal || function(){ document.getElementById('detailModal')?.classList.remove('active'); };
    </script>

    <script>
(function(){
  let appInitialized = false;

  // Dismiss splash (click or auto)
  const splash = document.getElementById('splashScreen');
  function dismissSplash(){
    if(!splash) return;
    splash.classList.add('hidden');
    setTimeout(()=> {
      try{ splash.remove(); } catch(e){}
      // ensure app boots when splash is removed
      if(!appInitialized) initApp();
    }, 600);
  }
  if(splash){
    splash.addEventListener('click', dismissSplash, {passive:true});
    // auto-dismiss after 4s
    setTimeout(dismissSplash, 4000);
  }

  // --- Auto slider ---
  function initSlider(){
    const track = document.getElementById('autoSliderTrack');
    const dots = document.getElementById('autoSliderDots');
    if(!track || !dots) return;
    const slides = Array.from(track.children);
    if(!slides.length) return;
    let idx = 0, timer = null;
    function render(){
      track.style.transform = `translateX(-${idx * 100}%)`;
      dots.innerHTML = '';
      slides.forEach((_, i) => {
        const b = document.createElement('button');
        b.className = 'auto-slider-dot' + (i===idx ? ' active' : '');
        b.onclick = () => { idx = i; render(); resetTimer(); };
        dots.appendChild(b);
      });
    }
    function next(){ idx = (idx + 1) % slides.length; render(); }
    function resetTimer(){ clearInterval(timer); timer = setInterval(next, 4500); }
    render(); resetTimer();
  }

  // --- Explore grids population (simple placeholder data) ---
  function populateExploreGrids(){
    // richer dataset for each tab (images are inline SVG placeholders)
    const placeholderImage = (label, bg='#f0f9ff', fg='#0f172a') => {
      return `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1200' height='800'%3E%3Crect fill='${encodeURIComponent(bg)}' width='1200' height='800'/%3E%3Ctext x='50%25' y='50%25' font-size='36' fill='${encodeURIComponent(fg)}' text-anchor='middle' dy='.3em'%3E${encodeURIComponent(label)}%3C/text%3E%3C/svg%3E`;
    };

    const datasets = {
      popular: [
        { name:'Mussoorie', img: placeholderImage('Mussoorie','#6d28d9','#fff'), rating:4.7, region:'Dehradun ‚Ä¢ 60 km' },
        { name:'Rishikesh', img: placeholderImage('Rishikesh','#8b5cf6','#fff'), rating:4.8, region:'Tehri Garhwal ‚Ä¢ Ganga' },
        { name:'Nainital', img: placeholderImage('Nainital','#1c70e3','#fff'), rating:4.6, region:'Nainital District ‚Ä¢ Lake' },
        { name:'Auli', img: placeholderImage('Auli','#fcd34d','#000'), rating:4.5, region:'Chamoli ‚Ä¢ Skiing' },
        { name:'Kedarnath', img: placeholderImage('Kedarnath','#ef4444','#fff'), rating:4.9, region:'Rudraprayag ‚Ä¢ Pilgrimage' },
        { name:'Chopta', img: placeholderImage('Chopta','#34d399','#fff'), rating:4.4, region:'Chamoli ‚Ä¢ Meadows' }
      ],
      nature: [
        { name:'Valley of Flowers', icon:'üåø', desc:'Alpine meadows full of endemic wildflowers.', season:'Jul ‚Äî Sep' },
        { name:'Munsiyari', icon:'üåø', desc:'Gateway to Johar valley and high-altitude views.', season:'Apr ‚Äî Oct' },
        { name:'Chopta Meadows', icon:'üåø', desc:'Lush meadows, base for Tungnath.', season:'Mar ‚Äî Nov' },
        { name:'Pithoragarh', icon:'üåø', desc:'Scenic valleys & Himalayan panoramas.', season:'Apr ‚Äî Oct' },
        { name:'Jim Corbett Forest', icon:'üåø', desc:'Wildlife & tiger reserve trails.', season:'Nov ‚Äî Jun' }
      ],
      spiritual: [
        { name:'Kedarnath', icon:'üõï', timings:'05:00 ‚Äî 21:00', difficulty:'High' },
        { name:'Badrinath', icon:'üõï', timings:'04:30 ‚Äî 20:30', difficulty:'Moderate' },
        { name:'Jageshwar', icon:'üõï', timings:'06:00 ‚Äî 19:00', difficulty:'Easy' },
        { name:'Tungnath', icon:'üõï', timings:'06:00 ‚Äî 18:00', difficulty:'Moderate' },
        { name:'Rishikesh (Yoga)', icon:'üõï', timings:'Open all day', difficulty:'Easy' }
      ],
      treks: [
        { name:'Kedarkantha', difficulty:'Moderate', duration:'3‚Äì4 days', height:'~12,500 ft' },
        { name:'Valley of Flowers', difficulty:'Moderate', duration:'4‚Äì6 days', height:'~14,000 ft' },
        { name:'Har Ki Doon', difficulty:'Moderate', duration:'6‚Äì7 days', height:'~11,500 ft' },
        { name:'Nag Tibba', difficulty:'Easy', duration:'1‚Äì2 days', height:'~9,915 ft' },
        { name:'Dodital', difficulty:'Moderate', duration:'3‚Äì4 days', height:'~9,000 ft' }
      ],
      stays: [
        { name:'Hillside Resort', price:'‚Çπ2,500‚Äì4,000', rating:4.3, location:'Mussoorie' },
        { name:'Riverfront Camps', price:'‚Çπ1,200‚Äì2,500', rating:4.5, location:'Rishikesh' },
        { name:'Lakeview Hotel', price:'‚Çπ3,000‚Äì5,500', rating:4.6, location:'Nainital' },
        { name:'Basecamp Lodge', price:'‚Çπ800‚Äì1,800', rating:4.1, location:'Chopta' }
      ],
      culture: [
        { title:'Uttarakhand Festivals', desc:'Local seasonal festivals that celebrate mountain culture.' },
        { title:'Folk Dances', desc:'Observe Garhwali & Kumaoni folk performances.' },
        { title:'Local Markets', desc:'Handicrafts, woollens, and regional produce.' },
        { title:'Handicrafts', desc:'Traditional woodwork, weaving & artifacts.' },
        { title:'Food & Cuisine', desc:'Regional flavours and street specialities.' }
      ],
      food: [
        { name:'Kafuli', desc:'Spinach & local greens curry ‚Äî nutritious and warming.' },
        { name:'Gahat Dal', desc:'Horse gram lentil curry ‚Äî regional staple.' },
        { name:'Bhang Ki Chutney', desc:'Spicy chutney from local herbs.' },
        { name:'Aloo ke Gutke', desc:'Spiced potato dish, Uttarakhand favourite.' },
        { name:'Bal Mithai', desc:'Traditional sweet from the hills.' }
      ]
    };

    // helper to render a card node
    function createCardHTML(category, item){
      if(category === 'popular'){
        return `
          <div class="explore-card">
            <div class="explore-card-img" style="background-image:url('${item.img}');background-size:cover;background-position:center"></div>
            <div class="explore-card-body">
              <div class="explore-card-title">${item.name}</div>
              <div class="explore-card-subtitle">${item.region || ''}</div>
              <div style="display:flex;justify-content:space-between;align-items:center;margin-top:1rem;">
                <div style="display:flex;gap:.5rem;align-items:center"><div class="explore-rating">‚≠ê ${item.rating}</div></div>
                <div style="width:40%"><button class="btn btn-primary" type="button" onclick="openDetail('${item.name.replace(/'/g,"\\'")}','Rating: ${item.rating} ‚Ä¢ ${item.region || ''}')">Explore</button></div>
              </div>
            </div>
          </div>`;
      }

      if(category === 'nature'){
        return `
          <div class="explore-card">
            <div class="explore-card-img card-img" style="display:flex;align-items:center;justify-content:center;font-size:48px">${item.icon || 'üåø'}</div>
            <div class="explore-card-body">
              <div class="explore-card-title">${item.name}</div>
              <div class="explore-card-subtitle">${item.desc}</div>
              <div style="margin-top:1rem;color:var(--text-light);font-weight:700">Best season: ${item.season}</div>
              <div style="margin-top:.75rem"><button class="btn btn-primary" type="button" onclick="openDetail('${item.name.replace(/'/g,"\\'")}','${item.desc} ‚Ä¢ Best: ${item.season}')">Explore</button></div>
            </div>
          </div>`;
      }

      if(category === 'spiritual'){
        return `
          <div class="explore-card">
            <div class="explore-card-img card-img" style="display:flex;align-items:center;justify-content:center;font-size:48px">üõï</div>
            <div class="explore-card-body">
              <div class="explore-card-title">${item.name}</div>
              <div class="explore-card-subtitle">Timings: ${item.timings} ‚Ä¢ Difficulty: ${item.difficulty}</div>
              <div style="margin-top:.75rem"><button class="btn btn-primary" type="button" onclick="openDetail('${item.name.replace(/'/g,"\\'")}','Timings: ${item.timings} ‚Ä¢ Difficulty: ${item.difficulty}')">Details</button></div>
            </div>
          </div>`;
      }

      if(category === 'treks'){
        return `
          <div class="explore-card">
            <div class="explore-card-img card-img" style="display:flex;align-items:center;justify-content:center;font-size:42px">ü•æ</div>
            <div class="explore-card-body">
              <div class="explore-card-title">${item.name}</div>
              <div class="explore-card-subtitle">Difficulty: ${item.difficulty} ‚Ä¢ Duration: ${item.duration}</div>
              <div style="margin-top:.5rem;color:var(--text-light)">Approx. Height: ${item.height}</div>
              <div style="margin-top:.75rem"><button class="btn btn-primary" type="button" onclick="openDetail('${item.name.replace(/'/g,"\\'")}','${item.difficulty} ‚Ä¢ ${item.duration} ‚Ä¢ ${item.height}')">View Trek</button></div>
            </div>
          </div>`;
      }

      if(category === 'stays'){
        return `
          <div class="explore-card">
            <div class="explore-card-img card-img" style="display:flex;align-items:center;justify-content:center;font-size:36px">üè®</div>
            <div class="explore-card-body">
              <div class="explore-card-title">${item.name}</div>
              <div class="explore-card-subtitle">${item.location} ‚Ä¢ ${item.price}</div>
              <div style="margin-top:1rem;display:flex;justify-content:space-between;align-items:center;">
                <div class="explore-rating">‚≠ê ${item.rating}</div>
                <div style="width:40%"><button class="btn btn-primary" type="button" onclick="openDetail('${item.name.replace(/'/g,"\\'")}','${item.location} ‚Ä¢ ${item.price} ‚Ä¢ Rating ${item.rating}')">Book</button></div>
              </div>
            </div>
          </div>`;
      }

      if(category === 'culture'){
        return `
          <div class="explore-card">
            <div class="explore-card-img card-img" style="display:flex;align-items:center;justify-content:center;font-size:42px">üé≠</div>
            <div class="explore-card-body">
              <div class="explore-card-title">${item.title}</div>
              <div class="explore-card-subtitle">${item.desc}</div>
              <div style="margin-top:.75rem"><button class="btn btn-primary" type="button" onclick="openDetail('${item.title.replace(/'/g,"\\'")}','${item.desc}')">Explore</button></div>
            </div>
          </div>`;
      }

      if(category === 'food'){
        return `
          <div class="explore-card">
            <div class="explore-card-img card-img" style="display:flex;align-items:center;justify-content:center;font-size:36px">üçΩÔ∏è</div>
            <div class="explore-card-body">
              <div class="explore-card-title">${item.name}</div>
              <div class="explore-card-subtitle">${item.desc}</div>
              <div style="margin-top:.75rem"><button class="btn btn-primary" type="button" onclick="openDetail('${item.name.replace(/'/g,"\\'")}','${item.desc}')">View</button></div>
            </div>
          </div>`;
      }

      return '';
    }

    Object.keys(datasets).forEach(cat => {
      const grid = document.getElementById(`${cat}-grid`);
      if(!grid) return;
      grid.innerHTML = datasets[cat].map(item => createCardHTML(cat, item)).join('');
    });

    // ensure default visible tab is Popular
    const activeTabButton = document.querySelector('.explore-tab[data-tab="popular"]');
    if(activeTabButton) {
      document.querySelectorAll('.explore-tab').forEach(t => t.classList.toggle('active', t === activeTabButton));
      switchExploreTab('popular');
    }
  }

  // --- Detail modal helpers ---
  function openDetail(title, desc){
    const modal = document.getElementById('detailModal');
    const t = document.getElementById('detailTitle');
    const d = document.getElementById('detailDescription');
    if(t) t.textContent = title || '';
    if(d) d.textContent = desc || '';
    modal && modal.classList.add('active');
  }
  function closeModal(){
    const modal = document.getElementById('detailModal');
    modal && modal.classList.remove('active');
  }

  // --- Explore / tabs ---
  function openExplore(cat){
    const screen = document.getElementById('exploreScreen');
    if(!screen) { console.warn('exploreScreen missing'); return; }
    screen.classList.add('active');
    switchExploreTab(cat || 'popular');
    setNav('explore');
  }
  function closeExplore(){
    const screen = document.getElementById('exploreScreen');
    screen && screen.classList.remove('active');
    setNav('home');
  }
  function switchExploreTab(tab){
    document.querySelectorAll('.explore-tab').forEach(t => t.classList.toggle('active', t.dataset.tab === tab));
    document.querySelectorAll('.explore-content').forEach(c => c.classList.toggle('active', c.id === `${tab}-content`));
    const title = document.getElementById('exploreTitle');
    if(title) title.textContent = tab || 'Popular';
  }

  // --- Map helpers (graceful if map markup missing) ---
  let _map;
  function openMap(){
    const mapScreen = document.getElementById('mapScreen');
    if(!mapScreen){ alert('Map screen not present in this build'); return; }
    mapScreen.classList.add('active');
    setNav('map');
    setTimeout(initMap, 100);
  }
  function closeMap(){
    const mapScreen = document.getElementById('mapScreen');
    mapScreen && mapScreen.classList.remove('active');
    setNav('home');
  }
  function initMap(){
    if(_map || typeof L === 'undefined') return;
    try{
      _map = L.map('map').setView([30.3165, 78.0322], 10);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(_map);
    }catch(e){ console.warn('Leaflet init failed', e); }
  }

  // --- Navigation helper ---
  function setNav(key){
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    if(!key) return;
    document.querySelectorAll('.nav-item').forEach(n => {
      if(n.textContent && n.textContent.trim().toLowerCase() === key) n.classList.add('active');
    });
    if(key === 'home') document.querySelector('.nav-item') && document.querySelector('.nav-item').classList.add('active');
    if(key === 'explore') { const items = document.querySelectorAll('.nav-item'); items[1] && items[1].classList.add('active'); }
    if(key === 'map'){ const items = document.querySelectorAll('.nav-item'); items[2] && items[2].classList.add('active'); }
  }

  // --- small placeholders for other actions (non-blocking) ---
  function openSearch(){ alert('Search placeholder'); }
  function openNotifications(){ alert('Notifications placeholder'); }
  function openCamera(){ alert('Camera placeholder'); }

  // expose to global for inline onclicks already in markup
  window.openDetail = window.openDetail || openDetail;
  window.closeModal = window.closeModal || closeModal;
  window.openExplore = window.openExplore || openExplore;
  window.closeExplore = window.closeExplore || closeExplore;
  window.switchExploreTab = window.switchExploreTab || switchExploreTab;
  window.openMap = window.openMap || openMap;
  window.closeMap = window.closeMap || closeMap;
  window.initMap = window.initMap || initMap;
  window.setNav = window.setNav || setNav;
  window.openSearch = window.openSearch || openSearch;
  window.openNotifications = window.openNotifications || openNotifications;
  window.openCamera = window.openCamera || openCamera;

  // init app after splash removed (or immediately if already removed)
  function initApp(){
    if(appInitialized) return;
    appInitialized = true;
    initSlider();
    populateExploreGrids();
  }

  // fallback in case transitionend doesn't fire or splash removed early
  const fallbackInit = setTimeout(()=> { if(!appInitialized) initApp(); }, 1200);

  if(!document.getElementById('splashScreen')) {
    clearTimeout(fallbackInit);
    initApp();
  } else {
    // also listen for removal via mutation (safe)
    const observer = new MutationObserver(()=> {
      if(!document.getElementById('splashScreen')) {
        observer.disconnect();
        clearTimeout(fallbackInit);
        initApp();
      }
    });
    observer.observe(document.body, { childList: true, subtree: true });

    // keep original transitionend hook too
    const sp = document.getElementById('splashScreen');
    if(sp) sp.addEventListener('transitionend', function onEnd(){
      sp.removeEventListener('transitionend', onEnd);
      clearTimeout(fallbackInit);
      initApp();
    }, { once:true });
  }
})();
</script>

<script>
/* Performance and UX improvements: make search functional, debounce, lazy filter,
   ensure explore populated on demand, reduce slider work on mobile/touch. */

(function(){
  // debounce helper
  function debounce(fn, wait){ let t; return function(...a){ clearTimeout(t); t = setTimeout(()=> fn.apply(this,a), wait); }; }

  // ensure explore grids exist/populated
  function ensureExplorePopulated(){
    if(window._explorePopulated) return;
    if(typeof populateExploreGrids === 'function'){
      try{ populateExploreGrids(); window._explorePopulated = true; }catch(e){ console.error(e); }
    }
  }

  // wire search bar to filter explore cards
  const searchBar = document.querySelector('.search-bar input');
  if(searchBar){
    searchBar.removeAttribute('readonly');
    searchBar.placeholder = 'Search places, treks, stays...';
    // focus behavior: open explore and focus input
    document.querySelector('.search-bar').addEventListener('click', function(e){
      ensureExplorePopulated();
      openExplore('popular');
      searchBar.classList.add('search-active');
      searchBar.focus();
    }, { passive:true });

    // filter logic
    function performSearch(q){
      const term = (q||'').trim().toLowerCase();
      ensureExplorePopulated();
      let any = false;
      // search across all grids
      document.querySelectorAll('.explore-grid').forEach(grid=>{
        grid.querySelectorAll('.explore-card').forEach(card=>{
          const nameEl = card.querySelector('.explore-card-title') || card.querySelector('.card-title') || { textContent: '' };
          const subtitleEl = card.querySelector('.explore-card-subtitle') || { textContent: '' };
          const text = (nameEl.textContent + ' ' + subtitleEl.textContent).toLowerCase();
          if(!term || text.includes(term)){
            card.style.display = '';
            any = true;
          } else {
            card.style.display = 'none';
          }
        });
      });
      // show no-results message
      const body = document.querySelector('.explore-body');
      if(!term){
        const prev = document.querySelector('.explore-no-results');
        prev && prev.remove();
      } else {
        let prev = document.querySelector('.explore-no-results');
        if(!any){
          if(!prev){
            const el = document.createElement('div');
            el.className = 'explore-no-results';
            el.textContent = `No results for "${term}"`;
            body.prepend(el);
          } else {
            prev.textContent = `No results for "${term}"`;
          }
        } else {
          prev && prev.remove();
        }
      }
    }

    const debouncedSearch = debounce(performSearch, 250);
    searchBar.addEventListener('input', e => {
      debouncedSearch(e.target.value);
    });

    // clear highlight on blur
    searchBar.addEventListener('blur', ()=> searchBar.classList.remove('search-active'));
  }

  // improve slider performance: pause on touch and when explore modal open
  (function optimizeSlider(){
    const track = document.getElementById('autoSliderTrack');
    const dots = document.getElementById('autoSliderDots');
    if(!track || !dots) return;
    const slides = Array.from(track.children);
    if(!slides.length) return;
    let idx = 0;
    let interval = Math.max(4500, navigator.userAgent.includes('Mobi') ? 6000 : 4500);
    let timer = null;

    function render(){
      track.style.transform = `translateX(-${idx * 100}%)`;
      dots.innerHTML = '';
      slides.forEach((_, i) => {
        const b = document.createElement('button');
        b.className = 'auto-slider-dot' + (i===idx ? ' active' : '');
        b.onclick = ()=> { idx = i; render(); resetTimer(); };
        dots.appendChild(b);
      });
    }

    function next(){ idx = (idx + 1) % slides.length; render(); }
    function resetTimer(){ clearInterval(timer); timer = setInterval(next, interval); }
    render(); resetTimer();

    // pause on touch interaction to reduce CPU on mobile
    let isTouching = false;
    track.addEventListener('touchstart', ()=> { isTouching = true; clearInterval(timer); }, { passive:true });
    track.addEventListener('touchend', ()=> { if(isTouching) { isTouching = false; resetTimer(); } }, { passive:true });

    // pause if any modal/explore open
    const pauseOnOpen = ()=> clearInterval(timer);
    const resumeOnClose = ()=> resetTimer();
    document.addEventListener('explore-open', pauseOnOpen);
    document.addEventListener('explore-close', resumeOnClose);
  })();

  // make openExplore/populate robust: ensure grids populated and remove boxed look
  const origOpenExplore = window.openExplore;
  window.openExplore = function(cat){
    ensureExplorePopulated();
    const screen = document.getElementById('exploreScreen');
    if(!screen) return;
    screen.classList.add('active','explore-unboxed');
    // highlight category card
    document.querySelectorAll('.category-card').forEach(c=>{
      const label = c.querySelector('.category-label')?.textContent?.trim().toLowerCase() || '';
      c.classList.toggle('active', label === ((cat||'popular').toLowerCase()));
    });
    // show tab
    if(typeof switchExploreTab === 'function') switchExploreTab(cat || 'popular');
    if(typeof setNav === 'function') setNav('explore');
    // emit event for slider pause
    document.dispatchEvent(new Event('explore-open'));
  };

  // closeExplore should resume slider
  const origCloseExplore = window.closeExplore;
  window.closeExplore = function(){
    const screen = document.getElementById('exploreScreen');
    screen && screen.classList.remove('active','explore-unboxed');
    if(typeof setNav === 'function') setNav('home');
    document.dispatchEvent(new Event('explore-close'));
  };

  // premium More modal enhancements: add header & quick-actions when opened
  const origOpenMore = window.openMore || function(){ document.getElementById('moreModal')?.classList.add('active'); };
  window.openMore = function(){
    origOpenMore();
    const content = document.getElementById('moreContent');
    if(!content) return;
    // build premium header
    const header = document.createElement('div');
    header.className = 'more-header';
    header.innerHTML = `<div class="more-hero"><div class="icon">üîé</div><div><strong style="font-size:1.05rem">More & Tools</strong><div style="color:var(--text-light);font-size:0.9rem">Quick access to useful travel helpers</div></div></div>
                        <div style="display:flex;gap:.5rem;align-items:center"><button class="btn btn-outline btn-small" onclick="closeMore()">Close</button></div>`;
    // inject at top
    if(content.firstChild && content.firstChild.classList && content.firstChild.classList.contains('more-list')){
      content.insertBefore(header, content.firstChild);
    } else {
      content.prepend(header);
    }
    // add a prominent quick actions row
    const quick = document.createElement('div');
    quick.className = 'more-actions';
    quick.innerHTML = `<button class="btn btn-primary btn-small" onclick="weatherForecast()">Weather</button>
                       <button class="btn btn-outline btn-small" onclick="showNearbyEssentials('atm')">Nearby</button>
                       <button class="btn btn-outline btn-small" onclick="showTransportTimings()">Transport</button>
                       <button class="btn btn-secondary btn-small" onclick="openGuides()">Guides</button>`;
    header.after(quick);
  };

  // ensure explore is populated early but not expensive: run after first paint
  if('requestIdleCallback' in window){
    requestIdleCallback(()=> ensureExplorePopulated(), { timeout: 1000 });
  } else {
    setTimeout(()=> ensureExplorePopulated(), 700);
  }

  // small accessibility/perf tweak: reduce animations when user prefers reduced motion
  if(window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches){
    document.documentElement.style.setProperty('--reduce-motion','1');
    document.querySelectorAll('*').forEach(el => el.style.transitionDuration = '0.001ms');
  }

  // expose helpers in case code order differs
  window.ensureExplorePopulated = ensureExplorePopulated;
})();
</script>
</body>
</html>
